<!DOCTYPE html>
<html lang="pl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piotr Nowakowski - Profil & Kariera</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=Inter:wght@400;500;700&family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- STYLE PODSTAWOWE (WIDOK DOMYŚLNY / KOMPUTERY) --- */
        :root {
            --base03: #dee2e6; --base02: #f8f9fa; --base01: #212529; --base00: #495057;
            --base0:  #ced4da; --base1:  #6c757d; --base2:  #ffffff; --base3:  #f8f9fa;
            --base2-rgb: 255, 255, 255; --yellow: #ffc107; --orange: #fd7e14;
            --red:    #dc3545; --magenta:#d63384; --violet: #4f46e5; --blue:   #0d6efd;
            --cyan:   #0dcaf0; --green:  #198754; --contact-color: var(--base1);
        }
        
        body.theme-atom-one-dark {
            --base03: #282c34; --base02: #21252b; --base01: #cbcfd6; --base00: #5c6370;
            --base0:  #5c6370; --base1:  #e06c75; --base2: #21252b; --base3: #282c34;
            --base2-rgb: 33, 37, 43; --yellow: #e5c07b; --orange: #d19a66;
            --red:    #e06c75; --magenta:#c678dd; --violet: #c678dd; --blue:   #61afef;
            --cyan:   #56b6c2; --green:  #98c379; --contact-color: var(--base00);
        }
        
        html, body {
            font-family: 'Inter', sans-serif;
            height: 100%;
        }
        html {
            scroll-behavior: smooth;
        }
        body { background-color: var(--base2); color: var(--base01); }

        main {
            /* Usunięto style tworzące podwójny suwak */
        }

        .page-section {
            min-height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        header.fixed {
            background-color: rgba(var(--base2-rgb), 0.5);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
        }
        
        #profile-section { 
            background-color: var(--base2);
            height: 100vh;
            overflow: hidden;
        }
        #skills-section {
            background-color: var(--base2);
            height: 100vh;
            overflow: hidden;
        }
        body.theme-atom-one-dark #profile-section, body.theme-atom-one-dark #career-section, body.theme-atom-one-dark #skills-section { background-color: var(--base3); }

        .profile-image-container {
            width: 240px; height: 240px; border-radius: 50%;
            overflow: hidden; border: none; margin: 0 auto;
        }
        .profile-image { width: 100%; height: 100%; object-fit: cover; }
        
        .lang-btn {
            padding: 2px 8px; border-radius: 0; transition: color 0.3s;
            color: var(--base1); border: 1px solid transparent; cursor: pointer;
        }
        body.theme-atom-one-dark .lang-btn:not(.active):not(:hover) { color: var(--base00); }
        .lang-btn:hover, #navbar a:hover { color: var(--base01); }
        .lang-btn.active, #navbar a.active { color: var(--base01); cursor: default; }
        #navbar a { color: var(--contact-color); transition: color 0.3s; text-decoration: none; }

        #main-container { max-width: 1200px; width: 100%; }

        .tab-title { transition: color 0.3s; cursor: pointer; }
        .tab-title.active { color: var(--base01); cursor: default; }
        .tab-title.inactive { color: var(--contact-color); }
        .tab-content {
            display: none; max-height: 13rem; 
            overflow-y: auto; padding-right: 1em;
        }
        .tab-content.active { display: block; }
        .tab-content::-webkit-scrollbar { width: 8px; }
        .tab-content::-webkit-scrollbar-track { background: transparent; }
        .tab-content::-webkit-scrollbar-thumb {
            background-color: var(--base00); border-radius: 20px; border: 3px solid transparent;
        }
        .tab-content::-webkit-scrollbar-thumb:hover { background-color: var(--base01); }

        .mobile-title { display: none; }
        .mobile-separator { display: none; }

        .contact-info { color: var(--contact-color); }
        .copy-btn {
            background: none; border: none; padding: 0.25rem;
            cursor: pointer; color: var(--contact-color);
            transition: color 0.2s, transform 0.2s;
        }
        .copy-btn:hover {
            color: var(--base01);
            transform: scale(1.1);
        }
        #toast-notification {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }
        #toast-notification.show {
            opacity: 1;
        }
        
        .desktop-separator { border-right: 1px solid var(--base0); }

        #desktop-separator-line {
            background-color: var(--base0);
        }
        
        /* --- Style przełącznika motywu --- */
        .theme-toggle-btn {
            padding: 0.25rem;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--base00);
            transition: color 0.3s;
        }
        .theme-toggle-btn:hover {
            color: var(--base01);
        }
        .theme-toggle-btn .sun-circle {
            transition: fill 0.3s ease-in-out;
        }
        body:not(.theme-atom-one-dark) .theme-toggle-btn {
            color: var(--base01);
        }
        body:not(.theme-atom-one-dark) .sun-circle {
            fill: currentColor;
        }
        body.theme-atom-one-dark .sun-circle {
            fill: none;
        }
        #mobile-theme-switcher .theme-toggle-btn {
            color: var(--base00);
        }
        body:not(.theme-atom-one-dark) #mobile-theme-switcher .theme-toggle-btn {
            color: var(--base01);
        }

        /* --- Style dla sekcji Kariera --- */
        #career-section {
            align-items: flex-start;
            background-color: var(--base2);
            padding-top: 7rem;
            padding-bottom: 4rem;
            height: auto; 
        }
        
        .career-entry {
            display: flex;
            align-items: stretch;
            margin-bottom: 3rem;
            position: relative;
        }
        .timeline-text-secondary { color: var(--base00); }
        .timeline-text-accent { color: var(--blue); }
        .timeline-link:hover { text-decoration: underline; }
        .accordion-icon { transition: transform 0.3s ease-in-out; }
        .accordion-toggle.active .accordion-icon { transform: rotate(180deg); }
        .accordion-content {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.5s ease-in-out;
        }
        .tag-badge {
            font-size: 0.75rem; /* text-xs */
            padding: 0.25rem 0.75rem; /* px-3 py-1 */
            border-radius: 9999px; /* rounded-full */
            background-color: var(--base03);
            color: var(--base01);
        }
        body.theme-atom-one-dark .tag-badge {
            background-color: transparent;
            color: var(--base01);
            padding-left: 1.25em; 
            position: relative;
        }
        body.theme-atom-one-dark .tag-badge::before {
            content: '•';
            position: absolute;
            left: 0.25em; 
            top: 50%;
            transform: translateY(-50%);
        }
        .timeline-separator {
            border-left: 1px solid var(--base0);
        }
        
        /* === ZAKTUALIZOWANY STYL DLA WSKAŹNIKA NA OSI CZASU === */
        .career-entry .desktop-separator {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        
        .timeline-marker-wrapper {
            position: absolute;
            right: -1px; /* Centruje kropkę (3px) na linii (1px) */
            width: 3px;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            pointer-events: none;
        }

        .career-entry:hover .timeline-marker-wrapper {
            opacity: 1;
        }

        .timeline-dot {
            position: absolute;
            left: 1;
            width: 5px;
            height: 5px;
            background-color: var(--base0);
            border-radius: 50%;
            transition: top 0.3s cubic-bezier(0.25, 1, 0.5, 1) 0.15s, background-color 0.2s;
        }

        .timeline-dot-start, .timeline-dot-end {
            top: 50%;
            transform: translateY(-50%);
        }

        .career-entry:hover .timeline-dot-start {
            top: 0;
        }
        .career-entry:hover .timeline-dot-end {
            top: 100%;
        }
        
        .career-entry:hover .timeline-dot {
            background-color: var(--base01);
        }
        
        .timeline-year-label {
            position: absolute;
            right: 12px; /* Odstęp od separatora */
            font-size: 0.75rem;
            color: var(--base0);
            z-index: 10;
            top: 50%;
            transform: translateY(-50%);
            transition: color 0.2s ease-in-out;
            pointer-events: none;
        }

        .career-entry:hover .timeline-year-label {
            color: var(--base01);
        }
        /* === KONIEC ZAKTUALIZOWANEGO STYLU === */

        /* --- Style dla sekcji Umiejętności (skills) --- */
        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 550px; 
            height: 450px;
        }
        
        /* --- NOWE STYLE DLA ZAKŁADEK (TABS) --- */
        .skill-title {
            transition: color 0.3s;
            cursor: pointer;
        }
        .skill-title.active {
            color: var(--base01);
            cursor: default;
        }
        .skill-title:not(.active) {
            color: var(--contact-color);
        }

        #skill-tooltip-container {
            position: fixed; 
            pointer-events: none;
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
            opacity: 0; 
            transform: translateY(10px) scale(0.95); 
            z-index: 100;
        }
        #skill-tooltip-container.visible { 
            opacity: 1; 
            transform: translateY(0) scale(1); 
        }

        .skill-tooltip-card {
            background-color: var(--base2); 
            color: var(--base01); 
            padding: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 280px; 
            border-radius: 0.5rem;
            border: 1px solid var(--base03);
        }
        .skill-tooltip-card h3 { 
            color: inherit; 
        }
        
        body.theme-atom-one-dark .skill-tooltip-card {
            box-shadow: none;
            border-radius: 0;
        }
        body:not(.theme-atom-one-dark) .skill-tooltip-card {
            border: none;
            border-radius: 0;
        }

        /* --- MEDIA QUERIES DLA RESPONSYWNOŚCI --- */
        @media (max-width: 1199px) and (min-width: 768px) {
            #main-container { max-width: 100%; padding-left: 1.5rem; padding-right: 1.5rem; }
            .page-section { padding: 1rem; }
            #career-section, #skills-section { padding-top: 5.5rem; }
            .flex-col-right { padding-left: 1.5rem; }
            .flex-col-left { padding-right: 2.5rem; }
            h1 { font-size: 2rem; }
            p.text-xl { font-size: 1.125rem; }
        }

        @media (max-width: 767px) {
            html, body, main {
                overflow: auto;
                height: auto;
            }
            .page-section {
                height: auto;
                min-height: 100vh;
                padding: 5rem 1rem 2rem 1rem;
            }
            #career-section, #skills-section {
                min-height: auto;
                 padding: 5.5rem 1rem 2rem 1rem;
            }
            .chart-container { height: 350px; max-width: 100%; }
            #skills-tabs h2 { font-size: 1.25rem; } /* Zmniejszenie czcionki na mobile */
            
            #navbar, #desktop-nav-right { display: none; }
            #mobile-nav { display: flex; justify-content: space-between; align-items: center; width: 100%; height: 28px; }
            #mobile-logo { font-size: 1rem; font-weight: 500; color: var(--base01); text-decoration: none; }
            #mobile-theme-switcher { display: flex; align-items: center; }
            #mobile-lang-switcher { display: flex; align-items: center; font-size: 1rem; font-weight: 500; }
            #mobile-lang-switcher .lang-btn { padding: 0.25rem 0.35rem; color: var(--base00); }
            #mobile-lang-switcher .lang-btn.active { color: var(--base01); }
            #mobile-lang-switcher .separator { color: var(--base00); margin: 0 0.2rem; }

            .profile-image-container { width: 145px; height: 145px; }
            
            .profile-header-flex, .content-flex { flex-direction: column; }
            
            .flex-col-left, .flex-col-right { width: 100% !important; padding: 0 !important; text-align: center; }
            #desktop-separator-line { display: none; }
            .flex-col-left { margin-bottom: 2rem; }
            .flex-col-right .flex.justify-between { flex-direction: column; align-items: center; }

            .flex.flex-col.items-start, .flex.flex-col.text-right { align-items: center; text-align: center; padding-right: 0 !important; }
            
            .flex.flex-col.items-start h1, .flex.flex-col.text-right > p.desktop-contact-title { font-size: 1.2rem; line-height: 1.2; }
            .flex.flex-col.items-start p, .flex.flex-col.text-right p, .flex.flex-col.text-right div { line-height: 1.3; margin-top: 0.2rem; }
            .flex.flex-col.items-start p.text-xl, .flex.flex-col.text-right div.text-xl { font-size: 0.9rem; margin-top: 0.25rem; }
            .flex.flex-col.items-start p.text-base { font-size: 0.75rem; }
            .flex.flex-col.text-right > p:not(.desktop-contact-title), .flex.flex-col.text-right > div { font-size: 0.9rem; }
            .flex.flex-col.text-right { margin-top: 1.5rem; }

            .mobile-hidden-info { display: none; }
            #info-container h2, #summary-container h2 { font-size: 1rem; }
            .tab-content p { font-size: 14px; }
            
            .desktop-contact-title { display: none; }
            .mobile-separator { display: none; }

            [data-tab="edu"], [data-content="edu"], [data-tab="other-exp"], [data-content="other-exp"], #info-container .flex.space-x-6, #summary-container .flex.space-x-6 { display: none; }
            [data-content="summary"], [data-content="info"] { display: block !important; max-height: none; overflow-y: visible; padding-right: 0; }
            
            .content-flex { margin-top: 2rem; }
            #mobile-col-summary { order: 1; }
            #mobile-col-info { order: 2; margin-top: 2rem; }
            
            #info-container, #summary-container { align-items: center; }
            
            .mt-4.leading-relaxed { text-align: left; padding: 0 0.5rem; margin-top: 0; }
            [data-content="summary"] .text-justify { text-align: left; }
            .mobile-title { display: block; color: var(--base01); font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; text-align: center; }
            .contact-info { color: var(--base01); }
            
            .flex.flex-col.items-start h1 {
                width: -webkit-max-content; width: -moz-max-content; width: max-content;
                max-width: 100%; margin-left: auto; margin-right: auto;
                padding-bottom: 0.5rem; margin-bottom: 0.5rem;   
                border-bottom: 1px solid var(--base00);
            }
            .flex.flex-col.text-right .contact-info { color: var(--base00); }
            .flex.flex-col.text-right .copy-btn { color: var(--blue); }

            /* Responsive styles for Career Timeline */
            .career-entry .w-1\/4, .career-entry .w-3\/4 {
                width: 100%;
                padding: 0 !important;
            }
             .career-entry .desktop-separator {
                border-right: none;
                padding-bottom: 1rem;
                border-left: 2px solid var(--base0); 
                padding-left: 1.5rem;
            }
            .career-entry {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="theme-atom-one-dark">

    <header class="fixed top-0 left-0 right-0 z-50 flex justify-between items-center px-6 py-4">
        <nav id="navbar" class="flex items-center space-x-6 text-sm font-medium">
            <a href="#profile-section" data-section="profile-section" class="active">Profil</a>
            <a href="#skills-section" data-section="skills-section">Umiejętności</a>
            <a href="#career-section" data-section="career-section">Kariera</a>
            <a href="#">Kontakt</a>
        </nav>
        <div id="desktop-nav-right" class="flex-shrink-0 flex items-center space-x-4 ml-auto">
            <div id="theme-switcher" class="flex items-center text-sm">
                <button class="theme-toggle-btn" aria-label="Zmień motyw">
                    <svg class="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="22" height="22">
                        <path class="sun-circle" stroke-linecap="round" stroke-linejoin="round" d="M16.25 12a4.25 4.25 0 1 1-8.5 0 4.25 4.25 0 0 1 8.5 0Z" />
                        <path class="sun-rays" stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636" />
                    </svg>
                </button>
            </div>
            <div class="text-base00" style="color: var(--base0);">|</div>
            <div id="lang-switcher" class="flex items-center space-x-2 text-sm font-bold">
                <button data-lang="en" class="lang-btn">EN</button>
                <button data-lang="pl" class="lang-btn active">PL</button>
            </div>
        </div>

        <div id="mobile-nav" class="hidden">
            <div class="flex items-center space-x-4">
                <a href="#" id="mobile-logo">P.N.</a>
                <div id="mobile-theme-switcher">
                     <button class="theme-toggle-btn" aria-label="Zmień motyw">
                        <svg class="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="22" height="22">
                            <path class="sun-circle" stroke-linecap="round" stroke-linejoin="round" d="M16.25 12a4.25 4.25 0 1 1-8.5 0 4.25 4.25 0 0 1 8.5 0Z" />
                            <path class="sun-rays" stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636" />
                        </svg>
                    </button>
                </div>
            </div>
            <div id="mobile-lang-switcher">
                <button data-lang="en" class="lang-btn">EN</button>
                <span class="separator">/</span>
                <button data-lang="pl" class="lang-btn active">PL</button>
            </div>
        </div>
    </header>
    
    <main>
        <section id="profile-section" class="page-section">
            <div id="main-container">
                
                <div class="profile-header-flex flex items-center">
                    <div class="flex-col-left w-1/4 pr-10 desktop-separator">
                         <div class="profile-image-container">
                            <!-- UWAGA DOTYCZĄCA ZDJĘCIA:
                                 - Upewnij się, że pliki 'profile.webp' i 'profile.jpg' znajdują się w tym samym folderze co ten plik HTML.
                                 - Wielkość liter w nazwie pliku ma znaczenie (profile.jpg to nie to samo co Profile.JPG).
                                 - Jeśli zdjęcie wciąż się nie ładuje, spróbuj wyczyścić pamięć podręczną przeglądarki (Ctrl+Shift+R).
                            -->
                            <picture>
                                <source srcset="./profile.webp" type="image/webp">
                                <img src="./profile.jpg" alt="Piotr Nowakowski" class="profile-image" onerror="this.onerror=null; this.parentElement.innerHTML = '<div class=\'profile-image\' style=\'background-color: var(--base02); color: var(--base01); display: flex; align-items: center; justify-content: center; font-size: 4rem;\'>PN</div>';">
                            </picture>
                        </div>
                    </div>
                    <div class="flex-col-right w-3/4 pl-4">
                        <div class="flex justify-between items-center w-full">
                            <div class="flex flex-col items-start text-left">
                                <h1 class="text-3xl md:text-4xl text-blue font-bold">PIOTR <span class="font-normal">NOWAKOWSKI</span></h1>
                                <p class="text-base text-base00 mt-1 mobile-hidden-info">Wiek: 38 lat</p>
                                <div class="text-xl md:text-2xl mt-4 text-cyan">Spawacz TIG/MIG & Ślusarz</div>
                                <p class="text-base text-base00 mt-1 mobile-hidden-info">Ponad 9 lat doświadczenia zawodowego</p>
                            </div>
                            <div class="flex flex-col text-right pr-[1em]">
                                <p class="text-3xl md:text-4xl font-normal desktop-contact-title contact-info">KONTAKT</p>
                                <div class="mobile-separator"></div>
                                <p class="text-base mt-1 contact-info">Lokalizacja: Stonehouse, GL</p>
                                <div class="text-xl md:text-2xl mt-4 flex items-center justify-end contact-info">
                                    <span>Tel: <a href="tel:+447858925933" style="color: inherit; text-decoration: none;">+44 7858925933</a></span>
                                    <button data-copy-value="+447858925933" class="copy-btn ml-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5-.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
                                    </button>
                                </div>
                                <div class="text-base mt-1 flex items-center justify-end contact-info">
                                    <span>Email: piotrrekas@gmail.com</span>
                                    <button data-copy-value="piotrrekas@gmail.com" class="copy-btn ml-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5-.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
                                    </button>
                                </div>
                             </div>
                        </div>
                    </div>
                </div>

                <div class="content-flex flex items-start pt-12 relative">
                    <div id="mobile-col-info" class="flex-col-left w-1/4 pr-10">
                        <div id="info-container" class="flex flex-col text-left">
                            <h3 class="mobile-title">Informacje dodatkowe</h3>
                            <div class="flex space-x-6 text-2xl md:text-3xl font-medium pb-2 justify-start">
                                <h2 data-tab="edu" class="tab-title">EDUKACJA</h2>
                                <h2 data-tab="info" class="tab-title">INNE</h2>
                            </div>
                            <div class="mt-4 leading-relaxed">
                                <div data-content="edu" class="tab-content">
                                    <p>Uniwersytet Rzeszowski, Wydział Sztuki, Polska (2006 – 2009)</p>
                                    <p>Zespół Szkół Plastycznych, Rzeszów, Polska (2000 – 2006)</p>
                                </div>
                                <div data-content="info" class="tab-content">
                                    <p>Języki: Angielski (B1), Polski (Ojczysty)</p>
                                    <p>Certyfikat: 2 Level HACCP (Food Hygiene Production)</p>
                                    <p>Umiejętności komputerowe</p>
                                    <p>Prawo jazdy: Full UK B+E</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="desktop-separator-line" class="absolute top-12 w-px hidden md:block" style="left: 25%; height: 140px;"></div>

                    <div id="mobile-col-summary" class="flex-col-right w-3/4 pl-4">
                        <div id="summary-container" class="flex flex-col">
                            <h3 class="mobile-title">PODSUMOWANIE</h3>
                            <div class="flex space-x-6 text-2xl md:text-3xl font-medium pb-2 justify-start">
                                <h2 data-tab="summary" class="tab-title">PODSUMOWANIE ZAWODOWE</h2>
                                <h2 data-tab="other-exp" class="tab-title">INNE</h2>
                            </div>
                            <div class="mt-4 leading-relaxed text-left">
                                <div data-content="summary" class="tab-content">
                                    <p class="text-justify">Wszechstronny rzemieślnik z artystycznym doświadczeniem, specjalizujący się w obróbce metali i spawaniu metodą TIG, z dużym doświadczeniem w obróbce stali nierdzewnej oraz udokumentowaną zdolnością do dostarczania wysokiej jakości spoin w środowiskach o krytycznym znaczeniu dla bezpieczeństwa. Doświadczony w pracy według wymagających standardów dla sektorów takich jak lotnictwo, obronność i produkcja żywności. Chociaż doświadczenie w spawaniu aluminium jest bardziej ograniczone, wczesne projekty wykazały obiecujące wyniki i dużą zdolność do szybkiej adaptacji i postępów. Skupiony na bezpieczeństwie, dokładności i ciągłym doskonaleniu, poszukuje możliwości dalszego rozwoju i wkładu w projekty o wysokiej integralności.</p>
                                </div>
                                <div data-content="other-exp" class="tab-content">
                                    <p><strong>Fabricator</strong>, Customade Group (09.2019 - 06.2020)</p>
                                    <p><strong>Office Worker</strong>, The Gloucestershire Chilli Farm (04.2019 - 09.2019)</p>
                                    <p><strong>Restoration Technician</strong>, Arkada Budownictwo i Zabytki Sp. zo.o. (08.2014 - 09.2015)</p>
                                    <p><strong>Restoration Technician</strong>, Restoart Sp. z o.o. (08.2011 - 06.2012)</p>
                                    <p><strong>Fish Process Operative</strong>, SNOPAC Products Inc. (07.2009 - 10.2009)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <section id="skills-section" class="page-section">
            <div id="main-container" class="container mx-auto px-6 w-full flex flex-col justify-center items-center">

                <div class="flex flex-col items-center w-full max-w-4xl mt-12">
                    <div id="skills-tabs" class="flex items-center justify-center space-x-6 mb-8">
                        <h2 data-skill-type="technical" class="skill-title active text-2xl md:text-3xl font-medium" data-translate-key="technical_skills_title">TECHNICZNE</h2>
                        <h2 data-skill-type="soft" class="skill-title text-2xl md:text-3xl font-medium" data-translate-key="soft_skills_title">MIĘKKIE</h2>
                    </div>

                    <div class="chart-container w-full">
                        <canvas id="skillsChart"></canvas>
                    </div>
                </div>

            </div>
        </section>

        <section id="career-section" class="page-section">
            <div id="main-container" class="container mx-auto w-full relative">
                <div class="flex flex-col md:flex-row mb-12 md:items-end">
                    <div class="w-1/4 pr-10 flex items-center">
                        <h2 class="text-2xl md:text-3xl font-medium">Oś Czasu</h2>
                    </div>
                    <div class="w-3/4 pl-4 flex justify-between items-end">
                        <h2 class="text-2xl md:text-3xl font-medium">Doświadczenie Zawodowe</h2>
                        <button id="expand-all-btn" class="text-sm font-medium timeline-text-secondary timeline-link whitespace-nowrap ml-4 pb-1">Rozwiń wszystko</button>
                    </div>
                </div>
                
                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">09.2024 - 07.2025</span>
                            <h3 class="text-xl font-bold mt-1">TIG/MIG Welder</h3>
                            <h4 class="text-lg mt-1">CKF Systems Limited</h4>
                        </div>
                         <div class="mt-4">
                            <p class="text-sm">Gloucester, England</p>
                            <p class="text-sm">Sektor: Automatyka, Przemysł spożywczy</p>
                            <p class="text-sm">Strona: <a href="https://www.ckf.co.uk" target="_blank" class="timeline-text-accent timeline-link">ckf.co.uk</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Planowane ponowne podjęcie współpracy przy projektowaniu i spawaniu zautomatyzowanych linii produkcyjnych.</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Stal Nierdzewna</span>
                                    <span class="tag-badge">Stal Czarna</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                     <span class="tag-badge">Spawarka TIG/MIG</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                <svg class="accordion-icon w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                    <ul class="list-disc list-inside space-y-2">
                                        <li>Systematyczne dostarczanie wysokiej jakości spoin i wkład w pomyślne ukończenie złożonych projektów linii produkcyjnych.</li>
                                        <li>Pomyślna modernizacja i utrzymanie stanowiska spawalniczego.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">02.2024 - 08.2024</span>
                            <h3 class="text-xl font-bold mt-1">TIG/MIG Welder</h3>
                            <h4 class="text-lg mt-1">Fowlers Of Bristol (Engineers) Ltd.</h4>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm">Avonmouth, England</p>
                            <p class="text-sm">Sektor: Lotniczy, Obronny</p>
                            <p class="text-sm">Strona: <a href="https://www.fowlers-eng.com" target="_blank" class="timeline-text-accent timeline-link">fowlers-eng.com</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Spawanie komponentów ze stali nierdzewnej i aluminium dla kluczowych dostawców przemysłu lotniczego i obronnego. Praca wymagała zachowania najwyższych standardów jakości i bezpieczeństwa.</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Stal Nierdzewna</span>
                                    <span class="tag-badge">Aluminium</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Spawarka TIG/MIG</span>
                                    <span class="tag-badge">Narzędzia inspekcyjne</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                <svg class="accordion-icon w-5 h-5 mr-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                     <ul class="list-disc list-inside space-y-2">
                                        <li>Uzyskanie pozytywnych wyników testów i certyfikacji dla spoin pachwinowych na stali nierdzewnej i aluminium o grubościach 1.6mm, 3mm i 6mm.</li>
                                        <li>Wdrożenie rozwiązań dla ustawień spawalniczych, które umożliwiły przyjęcie nowych zleceń od klientów takich jak Rolls-Royce.</li>
                                        <li>Modernizacja i utrzymanie stanowiska spawalniczego, opracowanie procedur i ustawień spawalniczych.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">09.2022 - 02.2024</span>
                            <h3 class="text-xl font-bold mt-1">TIG/MIG Welder</h3>
                            <h4 class="text-lg mt-1">CKF Systems Limited</h4>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm">Gloucester, England</p>
                            <p class="text-sm">Sektor: Automatyka, Przemysł spożywczy</p>
                            <p class="text-sm">Strona: <a href="https://www.ckf.co.uk" target="_blank" class="timeline-text-accent timeline-link">ckf.co.uk</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Produkcja i spawanie różnorodnych komponentów linii produkcyjnych dla przemysłu spożywczego, w tym konstrukcji ze stali nierdzewnej i stali czarnej.</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Stal Nierdzewna</span>
                                    <span class="tag-badge">Stal Czarna</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Spawarka TIG/MIG</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                 <svg class="accordion-icon w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                 <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                    <ul class="list-disc list-inside space-y-2">
                                        <li>Systematyczne dostarczanie wysokiej jakości spoin i wkład w pomyślne ukończenie złożonych projektów linii produkcyjnych.</li>
                                        <li>Pomyślna modernizacja i utrzymanie stanowiska spawalniczego.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">01.2022 - 09.2022</span>
                            <h3 class="text-xl font-bold mt-1">TIG Welder</h3>
                            <h4 class="text-lg mt-1">DKM Sheetmetal Ltd</h4>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm">Stonehouse, England</p>
                            <p class="text-sm">Sektor: Produkcja AGD (premium)</p>
                            <p class="text-sm">Strona: <a href="https://www.dkm-sheetmetal.co.uk" target="_blank" class="timeline-text-accent timeline-link">dkm-sheetmetal.co.uk</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Praca przy projekcie pieców EVERHOT. Odpowiedzialność za spawanie metodą TIG części pokryw, zawiasów i elementów grilla wykonanych z blachy nierdzewnej (1-1.5mm) oraz grubszych płyt (5mm).</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Blacha Nierdzewna (1-5mm)</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Spawarka TIG</span>
                                    <span class="tag-badge">Zaciski i przyrządy</span>
                                </div>
                            </div>
                        </div>
                         <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                 <svg class="accordion-icon w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                 <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                    <ul class="list-disc list-inside space-y-2">
                                        <li>Opracowanie metody pracy pozwalającej na osiągniecie wyższej wydajności.</li>
                                        <li>Zgłaszanie wszelkich wadliwych urządzeń lub materiałów przełożonym.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">06.2020 - 02.2021</span>
                            <h3 class="text-xl font-bold mt-1">TIG Welder</h3>
                            <h4 class="text-lg mt-1">Berkeley Stainless Fittings</h4>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm">Bristol, England</p>
                            <p class="text-sm">Sektor: Produkcja sanitarna</p>
                            <p class="text-sm">Strona: <a href="https://www.berkeleystainless.co.uk/" target="_blank" class="timeline-text-accent timeline-link">berkeleystainless.co.uk</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Projektowanie i spawanie higienicznych elementów ze stali nierdzewnej, takich jak rury, złączki, zawory, stożki, kołnierze i inne części (RJT, DIN, SMS).</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Stal Nierdzewna (sanitarna)</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Spawarka TIG</span>
                                    <span class="tag-badge">Stół obrotowy</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                 <svg class="accordion-icon w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                 <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                     <ul class="list-disc list-inside space-y-2">
                                        <li>Spawanie TIG w standardzie higienicznym (pełny przetop z przedmuchem gazowym).</li>
                                        <li>Znacząca poprawa jakości spawania i zwiększenie prędkości stołu obrotowego (do 50%) dzięki opracowaniu książki danych spawalniczych.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="career-entry">
                    <div class="w-1/4 pr-10 desktop-separator">
                        <div>
                            <span class="text-sm mb-1">10.2015 - 04.2019</span>
                            <h3 class="text-xl font-bold mt-1">Metalworker</h3>
                            <h4 class="text-lg mt-1">Pangolin Editions Ltd.</h4>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm">Chalford, England</p>
                            <p class="text-sm">Sektor: Odlewnictwo artystyczne</p>
                            <p class="text-sm">Strona: <a href="https://www.pangolin-editions.com" target="_blank" class="timeline-text-accent timeline-link">pangolin-editions.com</a></p>
                        </div>
                    </div>
                    <div class="w-3/4 pl-4 pr-[1em]">
                        <div>
                             <p class="text-justify">Kompleksowa praca na wszystkich etapach tworzenia rzeźb z brązu w dziale obróbki metalu. Udział w projektach dla światowej sławy artystów, takich jak Damien Hirst, Lynn Chadwick czy Marc Quinn.</p>
                        </div>
                        <div class="flex flex-col md:flex-row mt-4 mb-4">
                            <div class="md:w-1/2 md:pr-4">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Materiały:</h5>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Brąz odlewniczy</span>
                                    <span class="tag-badge">Mosiądz</span>
                                    <span class="tag-badge">Stal Nierdzewna</span>
                                    <span class="tag-badge">Stal Czarna</span>
                                </div>
                            </div>
                            <div class="hidden md:block timeline-separator"></div>
                            <div class="md:w-1/2 md:pl-4 mt-4 md:mt-0">
                                <h5 class="font-semibold text-sm mb-2 timeline-text-secondary">Narzędzia:</h5>
                                <div class="flex flex-wrap gap-2">
                                     <span class="tag-badge">Spawarka TIG/MIG</span>
                                     <span class="tag-badge">Narzędzia ręczne i pneumatyczne</span>
                                     <span class="tag-badge">Narzędzia do modelowania i teksturowania</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="accordion-toggle flex items-center w-full text-left transition-colors">
                                 <svg class="accordion-icon w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                 <span class="font-normal text-sm timeline-text-secondary mr-1">Rozwiń</span><span class="font-semibold text-sm timeline-text-secondary">Osiągnięcia:</span>
                            </button>
                            <div class="accordion-content">
                                <div class="pt-4 pb-4">
                                    <ul class="list-disc list-inside space-y-2">
                                        <li>Modelowanie zmontowanych rzeźb: kształtowanie, teksturowanie, szlifowanie.</li>
                                        <li>Zwiększenie wydajności pracy działu poprzez opracowanie nowych metod pracy, technik i narzędzi.</li>
                                        <li>Skuteczne naprawy wadliwie odlanych rzeźb z brązu.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="toast-notification" class="fixed bottom-5 right-5 bg-green-600 text-white py-2 px-4 rounded-lg shadow-lg">
        Skopiowano do schowka!
    </div>

    <div id="skill-tooltip-container"></div>


    <script>
        // --- SEKCJA 1: Funkcje pomocnicze i narzędziowe ---
        const throttle = (func, limit) => {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        };

        const debounce = (func, delay) => {
            let timeout;
            return function() {
                const context = this;
                const args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        };

        const applyTheme = (theme) => {
            document.body.className = theme === 'default' ? '' : theme;
            localStorage.setItem('cv-theme', theme);
            if (skillsChart) renderSkillsChart(currentLang);
        };

        const loadTheme = () => {
            const savedTheme = localStorage.getItem('cv-theme') || 'theme-atom-one-dark';
            applyTheme(savedTheme);
        };

        const showToast = (message) => {
            const toast = document.getElementById('toast-notification');
            if (!toast) return;
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        };

        // --- SEKCJA 2: Funkcje związane z układem strony (Layout) ---
        
        const updateSeparatorHeight = () => {
            if (window.innerWidth < 768) return;

            const infoCol = document.querySelector('#mobile-col-info');
            const summaryCol = document.querySelector('#mobile-col-summary');
            const separator = document.getElementById('desktop-separator-line');
            
            if (!infoCol || !summaryCol || !separator) return;

            const infoHeight = infoCol.offsetHeight;
            const summaryHeight = summaryCol.offsetHeight;
            const maxHeight = Math.max(infoHeight, summaryHeight);
            
            separator.style.height = maxHeight + 'px';
        };

        const stabilizeLayoutHeight = () => {
            if (window.innerWidth < 768) return;

            const contentFlex = document.querySelector('#profile-section .content-flex');
            if (!contentFlex) return;

            const infoContents = document.querySelectorAll('#info-container .tab-content');
            const summaryContents = document.querySelectorAll('#summary-container .tab-content');
            
            contentFlex.style.minHeight = 'auto';

            let maxContainerHeight = 0;
            const originalActiveInfo = document.querySelector('#info-container .tab-content.active');
            const originalActiveSummary = document.querySelector('#summary-container .tab-content.active');

            infoContents.forEach(infoTab => {
                summaryContents.forEach(summaryTab => {
                    infoContents.forEach(c => c.style.display = 'none');
                    summaryContents.forEach(c => c.style.display = 'none');
                    infoTab.style.display = 'block';
                    summaryTab.style.display = 'block';
                    maxContainerHeight = Math.max(maxContainerHeight, contentFlex.offsetHeight);
                });
            });

            if (maxContainerHeight > 0) {
                contentFlex.style.minHeight = maxContainerHeight + 'px';
            }

            infoContents.forEach(c => c.style.display = '');
            summaryContents.forEach(c => c.style.display = '');
             document.querySelectorAll('.tab-content.active').forEach(c => c.classList.remove('active'));
            if (originalActiveInfo) originalActiveInfo.classList.add('active');
            if (originalActiveSummary) originalActiveSummary.classList.add('active');
            
            updateSeparatorHeight();
        };

        // --- SEKCJA 3: Funkcje inicjalizujące ---
        const initThemeSwitcher = () => {
            document.querySelectorAll('.theme-toggle-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const isDarkMode = document.body.classList.contains('theme-atom-one-dark');
                    applyTheme(isDarkMode ? 'default' : 'theme-atom-one-dark');
                });
            });
        };

        const initLangSwitcher = () => {
            const handleLangSwitch = (e) => {
                 if (e.target.matches('.lang-btn')) {
                    const selectedLang = e.target.dataset.lang;
                    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelectorAll(`.lang-btn[data-lang="${selectedLang}"]`).forEach(btn => btn.classList.add('active'));
                    translateSkillsPage(selectedLang);
                }
            };
            document.getElementById('lang-switcher')?.addEventListener('click', handleLangSwitch);
            document.getElementById('mobile-lang-switcher')?.addEventListener('click', handleLangSwitch);
        };

        const initTabs = () => {
            const setupTabs = (containerId) => {
                const container = document.getElementById(containerId);
                if (!container) return;
                const tabTitles = container.querySelectorAll('.tab-title');
                const tabContents = container.querySelectorAll('.tab-content');
                const activateTab = (tabId) => {
                    tabTitles.forEach(title => {
                        const isActive = title.getAttribute('data-tab') === tabId;
                        title.classList.toggle('active', isActive);
                        title.classList.toggle('inactive', !isActive);
                    });
                    tabContents.forEach(content => {
                        const isActive = content.getAttribute('data-content') === tabId;
                        content.classList.toggle('active', isActive);
                    });
                    setTimeout(updateSeparatorHeight, 0);
                };
                tabTitles.forEach(title => {
                    title.addEventListener('click', () => activateTab(title.getAttribute('data-tab')));
                });
                if (tabTitles.length > 0) {
                    activateTab(tabTitles[0].getAttribute('data-tab'));
                }
            };
            setupTabs('info-container');
            setupTabs('summary-container');
        };
        
        const initCareerAccordion = () => {
            const accordions = document.querySelectorAll('#career-section .accordion-toggle');
            const expandAllBtn = document.getElementById('expand-all-btn');
            if (!expandAllBtn) return;

            const updateExpandAllButton = () => {
                const allExpanded = [...accordions].every(acc => acc.classList.contains('active'));
                expandAllBtn.textContent = allExpanded ? 'Zwiń wszystko' : 'Rozwiń wszystko';
                expandAllBtn.dataset.expanded = allExpanded ? 'true' : 'false';
            };

            accordions.forEach(clickedAccordion => {
                clickedAccordion.addEventListener('click', (e) => {
                    e.preventDefault();
                    const content = clickedAccordion.nextElementSibling;
                    clickedAccordion.classList.toggle('active');

                    if (clickedAccordion.classList.contains('active')) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = null;
                    }
                    updateExpandAllButton();
                });
            });

            expandAllBtn.addEventListener('click', () => {
                const isExpanded = expandAllBtn.dataset.expanded === 'true';
                accordions.forEach(accordion => {
                    const content = accordion.nextElementSibling;
                    if (isExpanded) {
                        accordion.classList.remove('active');
                        content.style.maxHeight = null;
                    } else {
                        accordion.classList.add('active');
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                });
                updateExpandAllButton();
            });
        };

        const initCopyButtons = () => {
            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const valueToCopy = button.dataset.copyValue;
                    if (!valueToCopy) return;
                    navigator.clipboard.writeText(valueToCopy).then(() => {
                        showToast('Skopiowano!');
                    }).catch(err => {
                        console.error('Błąd kopiowania:', err);
                        showToast('Błąd kopiowania');
                    });
                });
            });
        };

        const initNavScrollListener = () => {
            const navLinks = document.querySelectorAll('#navbar a');
            const sections = document.querySelectorAll('main > section.page-section');
            
            if (sections.length === 0) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.intersectionRatio > 0.5) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                        });
                        const activeLink = document.querySelector(`#navbar a[href="#${id}"]`);
                        if(activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, { 
                root: null, 
                threshold: 0.5
            });

            sections.forEach(section => {
                observer.observe(section);
            });

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        // Let the smart scroll handle the navigation if it's active
                        if (window.innerWidth >= 768) {
                            const sectionsArray = Array.from(sections);
                            const targetIndex = sectionsArray.findIndex(s => s.id === targetSection.id);
                            if (targetIndex !== -1) {
                                // This assumes scrollToSection is globally available or refactored
                                // For now, we'll keep the direct scroll for nav clicks
                                targetSection.scrollIntoView({ behavior: 'smooth' });
                            }
                        } else {
                            targetSection.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });
        };

        const initSmartScroll = () => {
            // De-initialize if screen is too small
            if (window.innerWidth < 768) {
                // In a real app, you'd remove the listener if it was added before.
                // For this script's structure, we just prevent it from being added.
                return;
            }

            const sections = Array.from(document.querySelectorAll('main > .page-section'));
            if (sections.length < 2) return;

            let currentSectionIndex = 0;
            let isScrolling = false;
            const scrollAnimationDuration = 800; // ms

            // Find the initial section on page load
            const initialScrollY = window.scrollY;
            for(let i = 0; i < sections.length; i++) {
                if(sections[i].offsetTop >= initialScrollY) {
                    currentSectionIndex = i;
                    break;
                }
            }
            
            const scrollToSection = (index) => {
                if (index >= 0 && index < sections.length) {
                    isScrolling = true;
                    currentSectionIndex = index; // Update the index immediately
                    sections[index].scrollIntoView({ behavior: 'smooth' });
                    
                    // Set a timeout to re-enable scrolling after the animation is expected to finish
                    setTimeout(() => {
                        isScrolling = false;
                    }, scrollAnimationDuration);
                }
            };

            const wheelHandler = (event) => {
                // If a smooth scroll animation is in progress, prevent any other scroll actions
                if (isScrolling) {
                    event.preventDefault();
                    return;
                }

                const currentSection = sections[currentSectionIndex];
                const isCareerSection = currentSection.id === 'career-section';
                const scrollDirection = event.deltaY;

                if (isCareerSection) {
                    const rect = currentSection.getBoundingClientRect();
                    const viewportHeight = window.innerHeight;
                    
                    // Use a small tolerance to account for sub-pixel rendering issues
                    const isAtTop = rect.top >= -5;
                    const isAtBottom = rect.bottom <= viewportHeight + 5;

                    if (scrollDirection < 0 && isAtTop) { // User is at the top and wants to scroll up
                        event.preventDefault();
                        scrollToSection(currentSectionIndex - 1);
                    } else if (scrollDirection > 0 && isAtBottom) { // User is at the bottom and wants to scroll down
                        event.preventDefault();
                        if (currentSectionIndex < sections.length - 1) {
                            scrollToSection(currentSectionIndex + 1);
                        }
                    }
                    // IMPORTANT: If not at the edges, we DO NOT call preventDefault.
                    // This allows the browser's native scroll to work inside the career section.
                } else {
                    // For all other sections, we use the snap-scrolling behavior
                    event.preventDefault();
                    if (scrollDirection > 0 && currentSectionIndex < sections.length - 1) {
                        scrollToSection(currentSectionIndex + 1);
                    } else if (scrollDirection < 0 && currentSectionIndex > 0) {
                        scrollToSection(currentSectionIndex - 1);
                    }
                }
            };
            
            // Add the event listener once, ensuring it's not re-added on resize or other events.
            // The passive: false option is crucial for preventDefault() to work reliably.
            window.addEventListener('wheel', wheelHandler, { passive: false });
        };
        
        const initLayout = () => {
            stabilizeLayoutHeight();
        };
        
        let allJobsData = [];

        const initTimelineMarkers = () => {
            if (window.innerWidth < 768) return;

            document.querySelectorAll('.timeline-marker-wrapper').forEach(el => el.remove());

            const careerEntries = Array.from(document.querySelectorAll('#career-section .career-entry'));
            if (careerEntries.length === 0) return;

            const jobs = careerEntries.map((entry, index) => {
                const dateEl = entry.querySelector('.desktop-separator .text-sm');
                if (!dateEl) return null;
                
                const dateText = dateEl.textContent.trim();
                const [startStr, endStr] = dateText.split(' - ');
                
                if (!startStr || !endStr) return null;

                const [startMonth, startYear] = startStr.split('.').map(Number);
                const [endMonth, endYear] = endStr.split('.').map(Number);

                if (isNaN(startMonth) || isNaN(startYear) || isNaN(endMonth) || isNaN(endYear)) return null;

                entry.dataset.jobId = index;

                return {
                    id: index,
                    element: entry,
                    endYear: endYear,
                    startTotalMonths: startYear * 12 + (startMonth - 1),
                    endTotalMonths: endYear * 12 + (endMonth - 1),
                };
            }).filter(Boolean);

            if (jobs.length === 0) return;
            allJobsData = jobs;

            const minDate = Math.min(...jobs.map(j => j.startTotalMonths));
            const maxDate = Math.max(...jobs.map(j => j.endTotalMonths));
            const totalDuration = (maxDate - minDate) + 1;

            jobs.forEach(job => {
                const separator = job.element.querySelector('.desktop-separator');
                if (!separator) return;

                const durationMonths = (job.endTotalMonths - job.startTotalMonths) + 1;
                const topOffsetFromMax = maxDate - job.endTotalMonths;
                const topPercent = (topOffsetFromMax / totalDuration) * 100;
                const heightPercent = (durationMonths / totalDuration) * 100;

                const wrapper = document.createElement('div');
                wrapper.className = 'timeline-marker-wrapper';
                wrapper.style.top = `${topPercent}%`;
                wrapper.style.height = `${heightPercent}%`;
                
                const years = Math.floor(durationMonths / 12);
                const months = durationMonths % 12;
                let titleText = 'Czas trwania: ';
                if (years > 0) titleText += `${years} lat `;
                if (months > 0) titleText += `${months} mies.`;
                wrapper.title = titleText.trim();


                const startDot = document.createElement('div');
                startDot.className = 'timeline-dot timeline-dot-start';

                const endDot = document.createElement('div');
                endDot.className = 'timeline-dot timeline-dot-end';
                
                const yearLabel = document.createElement('span');
                yearLabel.className = 'timeline-year-label';
                yearLabel.textContent = job.endYear;
                
                wrapper.appendChild(startDot);
                wrapper.appendChild(endDot);
                wrapper.appendChild(yearLabel);
                separator.appendChild(wrapper);
            });
        };

        // --- SEKCJA UMIEJĘTNOŚCI (SKILLS) ---
        const translations = {
            technical_skills_title: { pl: "TECHNICZNE", en: "TECHNICAL" },
            soft_skills_title: { pl: "MIĘKKIE", en: "SOFT" },
            technical_qualifications_data: {
                pl: [
                    { title: "Spawanie TIG", desc: "Poziom ekspercki w spawaniu TIG (141), specjalizacja w stali nierdzewnej, aluminium i brązie. Precyzja w pracy z cienkimi i wymagającymi materiałami." },
                    { title: "Spawanie MIG", desc: "Dobre umiejętności w spawaniu MIG (135/136), efektywne przy grubszych materiałach i konstrukcjach stalowych." },
                    { title: "Rzemiosło Artystyczne", desc: "Poziom ekspercki w ręcznej obróbce metali, w tym w skomplikowanym kształtowaniu i wykańczaniu. Biegła obsługa specjalistycznych narzędzi ręcznych i traserskich." },
                    { title: "Obróbka Przemysłowa", desc: "Biegłość w produkcji i montażu komponentów przemysłowych. Swobodna obsługa elektronarzędzi (szlifierki, wiertarki) i podstawowa znajomość cięższych maszyn." },
                    { title: "Bezpieczeństwo i Procedury", desc: "Nienaganny rekord bezpieczeństwa (zero wypadków). Doświadczenie w tworzeniu baz danych (WPS) dla optymalizacji procesów spawalniczych, skracania czasu operacji i podnoszenia jakości." },
                    { title: "Jakość i Zgodność", desc: "Potwierdzenie umiejętności wraz ze zdaniem najtrudniejszej kwalifikacji w przemyśle lotniczym: spawanie pachwinowe (fillet weld) na blasze 1.6mm z pełną penetracją bez przetopu." }
                ],
                en: [
                    { title: "TIG Welding", desc: "Expert proficiency in TIG welding (141), specializing in stainless steel, aluminum, and bronze. Precision in working with thin and demanding materials." },
                    { title: "MIG Welding", desc: "Good skills in MIG welding (135/136), effective for thicker materials and steel structures." },
                    { title: "Artisanal Fabrication", desc: "Expert-level skill in manual metalwork, including complex shaping and finishing. Proficient in specialized hand and marking tools." },
                    { title: "Industrial Machining", desc: "Proficient in fabricating and assembling industrial components. Confident with power tools (grinders, drills) and basic knowledge of heavier machinery." },
                    { title: "Safety & Procedures", desc: "Impeccable safety record (zero accidents). Experienced in creating welding databases (WPS) to optimize welding processes, reduce operation times, and increase quality." },
                    { title: "Quality & Compliance", desc: "Confirmation of skills by passing the most difficult qualification in the aerospace industry: a 1.6mm fillet weld with full penetration and no melt-through." }
                ]
            },
            technical_skills_labels: {
                pl: [['Spawanie', 'TIG'], ['Spawanie', 'MIG'], ['Rzemiosło', 'Artystyczne'], ['Obróbka', 'Przemysłowa'], ['Procedury', 'Bezpieczeństwa'], ['Jakość i', 'Zgodność']],
                en: [['TIG', 'Welding'], ['MIG', 'Welding'], ['Artisanal', 'Fabrication'], ['Industrial', 'Machining'], ['Safety', 'Procedures'], ['Quality &', 'Compliance']]
            },
            soft_qualifications_data: {
                pl: [ { title: "Rozwiązywanie Problemów", desc: "Biegłość w diagnozowaniu i rozwiązywaniu złożonych wyzwań, od naprawy odlewów po optymalizację procesów spawalniczych." }, { title: "Zdolności Analityczne", desc: "Wysoce rozwinięte zdolności analityczne. Metodyczne podejście do optymalizacji procesów, co pozwoliło przewyższyć wydajność bardziej doświadczonych kolegów." }, { title: "Praca Zespołowa", desc: "Efektywna praca samodzielna i skoncentrowana na zadaniu. Dobrze funkcjonuje w zorganizowanych zespołach, gdzie role są jasno określone, wnosząc wkład poprzez dokładność i rzetelność." }, { title: "Kreatywność i Dbałość o Detal", desc: "Naturalny zmysł estetyczny, doskonalony przez 8 lat edukacji i doświadczenie zawodowe, przekłada się na wyjątkową precyzję i dbałość o najdrobniejsze detale." }, { title: "Ciągłe Uczenie Się", desc: "Szybkie przyswajanie nowych, skomplikowanych umiejętności pod presją, udowodnione zdaniem testów lotniczych." }, { title: "Etyka Pracy", desc: "Wyjątkowa etyka pracy, udokumentowana historia bezpieczeństwa i elastyczność w adaptacji do nowych zadań." } ],
                en: [ { title: "Problem Solving", desc: "Adept at diagnosing and resolving complex challenges, from repairing castings to optimizing welding processes." }, { title: "Analytical Ability", desc: "Highly developed analytical skills. A methodical approach to process optimization, which led to surpassing the efficiency of more experienced colleagues." }, { title: "Teamwork", desc: "Effective in independent, task-focused work. Functions well in structured teams with clearly defined roles, contributing through precision and reliability." }, { title: "Creativity & Attention to Detail", desc: "A natural aesthetic sense, honed through 8 years of education and professional experience, translates into exceptional precision and attention to the smallest details." }, { title: "Continuous Learning", desc: "Rapid acquisition of new, complex skills under pressure, proven by passing aerospace-grade tests." }, { title: "Work Ethic", desc: "Exceptional work ethic, a proven safety record, and flexibility in adapting to new tasks." } ]
            },
            soft_skills_labels: { pl: [['Rozwiązywanie', 'Problemów'], ['Zdolności', 'Analityczne'], ['Praca', 'Zespołowa'], ['Kreatywność', 'i Detal'], ['Ciągłe', 'Uczenie Się'], ['Etyka', 'Pracy']], en: [['Problem', 'Solving'], ['Analytical', 'Ability'], ['Teamwork', ' '], ['Creativity &', 'Detail'], ['Continuous', 'Learning'], ['Work', 'Ethic']] }
        };

        const createPaddedLabels = (originalTranslations) => {
            const allLines = [];
            ['technical_skills_labels', 'soft_skills_labels'].forEach(key => {
                ['pl', 'en'].forEach(lang => {
                    originalTranslations[key][lang].forEach(labelPair => {
                        allLines.push(...labelPair);
                    });
                });
            });

            const maxLength = Math.max(...allLines.map(line => line.trim().length));

            const padLine = (line) => {
                const trimmedLine = line.trim();
                const spacesToAdd = maxLength - trimmedLine.length;
                if (spacesToAdd <= 0) return trimmedLine;
                const leftPadding = Math.floor(spacesToAdd / 2);
                const rightPadding = Math.ceil(spacesToAdd / 2);
                return ' '.repeat(leftPadding) + trimmedLine + ' '.repeat(rightPadding);
            };

            const paddedTranslations = JSON.parse(JSON.stringify(originalTranslations));

            ['technical_skills_labels', 'soft_skills_labels'].forEach(key => {
                ['pl', 'en'].forEach(lang => {
                    paddedTranslations[key][lang] = originalTranslations[key][lang].map(labelPair => {
                        return labelPair.map(line => (line.trim() ? padLine(line) : line));
                    });
                });
            });

            return paddedTranslations;
        };

        let currentLang = 'pl';
        let skillsChart;
        let animationFrameId = null;
        let activeSkillType = 'technical';
        let techDataConfig, softDataConfig;
        let isInitialLoad = true; // Flag to track the very first animation

        let animationState = {
            startTime: null, lastData: null,
            isTransitioning: false, transitionStartTime: 0,
            transitionDuration: 800, fromColorsRgba: null, toColorsRgba: null
        };
        const paddedTranslations = createPaddedLabels(translations);

        const translateSkillsPage = (lang) => {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (translations[key] && translations[key][lang]) el.innerHTML = translations[key][lang];
            });
            document.querySelectorAll('.skill-title').forEach(title => {
                title.classList.toggle('active', title.dataset.skillType === activeSkillType);
            });
            renderSkillsChart(lang);
        };
        
        const colorStringToRgba = (colorStr) => {
            const canvas = document.createElement('canvas');
            canvas.width = canvas.height = 1;
            const ctx = canvas.getContext('2d');
            if (!colorStr) return [0,0,0,0]; // Handle cases where color might be undefined
            ctx.fillStyle = colorStr;
            ctx.fillRect(0, 0, 1, 1);
            const data = ctx.getImageData(0, 0, 1, 1).data;
            return [data[0], data[1], data[2], data[3]];
        };

        const updateTransitionColors = (timestamp) => {
            if (!animationState.isTransitioning) return;
            const progress = Math.min((timestamp - animationState.transitionStartTime) / animationState.transitionDuration, 1);
            const t = 1 - Math.pow(1 - progress, 3); // easeOutCubic
            const fromRgba = animationState.fromColorsRgba, toRgba = animationState.toColorsRgba;
            const lerp = (s, e, a) => Math.round(s + (e - s) * a);
            const rgbaToString = (rgba) => `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3] / 255})`;
            const interpolateRgba = (from, to) => [lerp(from[0], to[0], t), lerp(from[1], to[1], t), lerp(from[2], to[2], t), lerp(from[3], to[3], t)];

            const techBgNow = rgbaToString(interpolateRgba(fromRgba.tech.bg, toRgba.tech.bg));
            const techBorderNow = rgbaToString(interpolateRgba(fromRgba.tech.border, toRgba.tech.border));
            const softBgNow = rgbaToString(interpolateRgba(fromRgba.soft.bg, toRgba.soft.bg));
            const softBorderNow = rgbaToString(interpolateRgba(fromRgba.soft.border, toRgba.soft.border));

            skillsChart.data.datasets[0].backgroundColor = techBgNow;
            skillsChart.data.datasets[0].borderColor = techBorderNow;
            skillsChart.data.datasets[0].pointBackgroundColor = techBorderNow;
            skillsChart.data.datasets[1].backgroundColor = softBgNow;
            skillsChart.data.datasets[1].borderColor = softBorderNow;
            skillsChart.data.datasets[1].pointBackgroundColor = softBorderNow;

            if (progress >= 1) {
                animationState.isTransitioning = false;
            }
        };
        
        const shuffleArray = (array) => {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        };

        const randomizeAnimationParameters = () => {
            const originalTechSpeeds = [1.6, 1.2, 0.9, 1.1, 1.8, 1.8];
            const originalSoftSpeeds = [1.5, 1.1, 1.0, 1.2, 1.7, 1.9];

            techDataConfig.speeds = shuffleArray([...originalTechSpeeds]);
            softDataConfig.speeds = shuffleArray([...originalSoftSpeeds]);
            
            techDataConfig.oscillationSpeeds = techDataConfig.oscillationSpeeds.map(s => s * (0.8 + Math.random() * 0.4));
            softDataConfig.oscillationSpeeds = softDataConfig.oscillationSpeeds.map(s => s * (0.8 + Math.random() * 0.4));
        };


        function mainAnimationLoop(timestamp) {
            if (skillsChart && skillsChart.data.datasets[0].data.length) {
                
                const calculateTargetData = (ts) => {
                    if (!animationState.startTime) animationState.startTime = ts;
                    const globalElapsedTime = ts - animationState.startTime;
                    const easeOutCubic = p => 1 - Math.pow(1 - p, 3);
                    const animationBaseDuration = 2500;

                    const calculateValues = (config) => {
                        const finalTargets = config.data.map(d => d.base);
                        const amplitudes = config.data.map(d => d.amplitude);
                        return finalTargets.map((target, i) => {
                            const pointDuration = animationBaseDuration / config.speeds[i];
                            let currentValue;
                            if (globalElapsedTime < pointDuration) {
                                const progress = globalElapsedTime / pointDuration;
                                const easedProgress = easeOutCubic(progress);
                                currentValue = easedProgress * target;
                            } else {
                                const oscillationTime = globalElapsedTime - pointDuration;
                                const center = target - amplitudes[i];
                                const oscillation = amplitudes[i] * (1 + Math.cos(oscillationTime * config.oscillationSpeeds[i])) / 2;
                                currentValue = Math.max(0, Math.min(10, center + oscillation));
                            }
                            return currentValue;
                        });
                    };
                    const newValuesTech = calculateValues(techDataConfig);
                    const newValuesSoft = calculateValues(softDataConfig);
                    return { newValuesTech, newValuesSoft };
                };

                const { newValuesTech, newValuesSoft } = calculateTargetData(timestamp);

                const smoothingFactor = 0.1; 
                const lerp = (start, end, t) => start + (end - start) * t;

                const currentDataTech = skillsChart.data.datasets[0].data;
                const smoothedDataTech = currentDataTech.map((value, i) => lerp(value, newValuesTech[i], smoothingFactor));

                const currentDataSoft = skillsChart.data.datasets[1].data;
                const smoothedDataSoft = currentDataSoft.map((value, i) => lerp(value, newValuesSoft[i], smoothingFactor));

                skillsChart.data.datasets[0].data = smoothedDataTech;
                skillsChart.data.datasets[1].data = smoothedDataSoft;

                updateTransitionColors(timestamp);
                
                skillsChart.update('none');
            }
            animationFrameId = requestAnimationFrame(mainAnimationLoop);
        }

        const renderSkillsChart = (lang) => {
            let lastKnownData = null;
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            if (skillsChart) {
                lastKnownData = {
                    tech: [...skillsChart.data.datasets[0].data],
                    soft: [...skillsChart.data.datasets[1].data]
                };
                skillsChart.destroy();
            }

            const canvas = document.getElementById('skillsChart');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const s = getComputedStyle(document.body);
            const FONT_COLOR = s.getPropertyValue('--base01').trim(), GRID_COLOR = s.getPropertyValue('--base0').trim(), BG_COLOR = s.getPropertyValue('--base2').trim();
            
            techDataConfig = { 
                data: [
                    { base: 9, amplitude: 0.5 },    // TIG
                    { base: 7, amplitude: 0.5 },    // MIG
                    { base: 9, amplitude: 0.5 },    // Rzemiosło Artystyczne
                    { base: 6, amplitude: 0.5 },    // Obróbka Przemysłowa
                    { base: 8, amplitude: 0.5 },    // Bezpieczeństwo i Procedury
                    { base: 9, amplitude: 0.5 }     // Jakość i Zgodność
                ], 
                speeds: [1.6, 1.2, 0.9, 1.1, 1.8, 1.8], 
                oscillationSpeeds: [0.0009, 0.0014, 0.0011, 0.0013, 0.00105, 0.0017] 
            };
            softDataConfig = { data: [{ base: 8.5, amplitude: 1.5 }, { base: 8.75, amplitude: 0.25 }, { base: 6.5, amplitude: 0.5 }, { base: 9.5, amplitude: 1.0 }, { base: 8.5, amplitude: 0.5 }, { base: 8.5, amplitude: 0.5 }], speeds: [1.5, 1.1, 1.0, 1.2, 1.7, 1.9], oscillationSpeeds: [0.00095, 0.00145, 0.00115, 0.00135, 0.0010, 0.00175] };
            
            const initialDataTech = isInitialLoad ? techDataConfig.data.map(() => 0) : lastKnownData.tech;
            const initialDataSoft = isInitialLoad ? softDataConfig.data.map(() => 0) : lastKnownData.soft;

            const isDarkMode = document.body.classList.contains('theme-atom-one-dark');
            const baseColor = isDarkMode ? s.getPropertyValue('--cyan').trim() : s.getPropertyValue('--base01').trim();
            const activeOpacity = isDarkMode ? '4D' : '26', inactiveOpacity = '0D', inactiveBorderOpacity = '26';

            const techIsActive = activeSkillType === 'technical';
            const techBgColor = baseColor + (techIsActive ? activeOpacity : inactiveOpacity);
            const techBorderColor = techIsActive ? baseColor : baseColor + inactiveBorderOpacity;
            const softBgColor = baseColor + (!techIsActive ? activeOpacity : inactiveOpacity);
            const softBorderColor = !techIsActive ? baseColor : baseColor + inactiveBorderOpacity;


            skillsChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: paddedTranslations[`${activeSkillType}_skills_labels`][lang],
                    datasets: [
                        { label: 'Technical', data: initialDataTech, pointHoverBackgroundColor: BG_COLOR, pointBorderWidth: 0, backgroundColor: techBgColor, borderColor: techBorderColor, pointBackgroundColor: techBorderColor },
                        { label: 'Soft', data: initialDataSoft, pointHoverBackgroundColor: BG_COLOR, pointBorderWidth: 0, backgroundColor: softBgColor, borderColor: softBorderColor, pointBackgroundColor: softBorderColor }
                    ]
                },
                options: { 
                    maintainAspectRatio: false, responsive: true, animation: false,
                    scales: { r: { angleLines: { color: GRID_COLOR }, grid: { color: GRID_COLOR }, pointLabels: { font: { size: 12, family: "'IBM Plex Mono', monospace" }, color: FONT_COLOR, padding: 25 }, ticks: { backdropColor: `rgba(${s.getPropertyValue('--base2-rgb').trim()}, 0.75)`, color: FONT_COLOR, stepSize: 2, font: { family: "'IBM Plex Mono', monospace" } }, suggestedMin: 0, suggestedMax: 10 } }, 
                    plugins: { legend: { display: false }, tooltip: { enabled: false } } 
                }
            });
            
            if (isInitialLoad) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            isInitialLoad = false; 
                            randomizeAnimationParameters();
                            animationState.startTime = null; 
                            animationFrameId = requestAnimationFrame(mainAnimationLoop);
                            observer.unobserve(canvas); 
                        }
                    });
                }, { threshold: 0.5 });
                observer.observe(canvas);
            } else {
                if (!animationState.startTime) {
                    animationState.startTime = performance.now() - 3000;
                }
                animationFrameId = requestAnimationFrame(mainAnimationLoop);
            }
            
            initializeChartTooltipEvents(skillsChart, lang);
        };

        function initializeChartTooltipEvents(chart, lang) {
            const canvas = chart.canvas, tooltipEl = document.getElementById('skill-tooltip-container');
            const qualificationsDataKey = activeSkillType === 'technical' ? 'technical_qualifications_data' : 'soft_qualifications_data';
            const handleMouseMove = (e) => {
                const rect = canvas.getBoundingClientRect(), x = e.clientX - rect.left, y = e.clientY - rect.top;
                let foundLabel = false;
                const pointLabels = chart.scales.r._pointLabelItems;
                if (!pointLabels) return;
                for (let i=0; i < pointLabels.length; i++) {
                    const { left, right, top, bottom } = pointLabels[i];
                    if (x >= left && x <= right && y >= top && y <= bottom) {
                        foundLabel = true;
                        canvas.style.cursor = 'pointer';
                        const qual = translations[qualificationsDataKey][lang][i];
                        if (qual) tooltipEl.innerHTML = `<div class="skill-tooltip-card"><h3 class="font-bold mb-2">${qual.title}</h3><p class="text-sm">${qual.desc}</p></div>`;
                        tooltipEl.style.left = `${e.clientX + 15}px`;
                        tooltipEl.style.top = `${e.clientY + 15}px`;
                        tooltipEl.classList.add('visible');
                        break; 
                    }
                }
                if (!foundLabel) { canvas.style.cursor = 'default'; tooltipEl.classList.remove('visible'); }
            };
            const handleMouseLeave = () => { canvas.style.cursor = 'default'; tooltipEl.classList.remove('visible'); };
            canvas.removeEventListener('mousemove', canvas.mouseMoveHandler);
            canvas.removeEventListener('mouseleave', canvas.mouseLeaveHandler);
            canvas.mouseMoveHandler = handleMouseMove;
            canvas.mouseLeaveHandler = handleMouseLeave;
            canvas.addEventListener('mousemove', canvas.mouseMoveHandler);
            canvas.addEventListener('mouseleave', canvas.mouseLeaveHandler);
        }

        const initSkillTabs = () => {
            document.getElementById('skills-tabs').addEventListener('click', (e) => {
                if (!e.target.matches('.skill-title') || animationState.isTransitioning) return;
                const newType = e.target.dataset.skillType;
                if (newType === activeSkillType || !skillsChart) return;
                
                activeSkillType = newType;
                document.querySelectorAll('.skill-title').forEach(t => t.classList.remove('active'));
                e.target.classList.add('active');
                skillsChart.data.labels = paddedTranslations[`${activeSkillType}_skills_labels`][currentLang];

                const getTargetColors = (type) => {
                    const s = getComputedStyle(document.body), isDarkMode = document.body.classList.contains('theme-atom-one-dark');
                    const baseColor = isDarkMode ? s.getPropertyValue('--cyan').trim() : s.getPropertyValue('--base01').trim();
                    const activeOpacity = isDarkMode ? '4D' : '26', inactiveOpacity = '0D', inactiveBorderOpacity = '26';
                    return {
                        tech: { bg: baseColor + (type === 'technical' ? activeOpacity : inactiveOpacity), border: type === 'technical' ? baseColor : baseColor + inactiveBorderOpacity },
                        soft: { bg: baseColor + (type === 'soft' ? activeOpacity : inactiveOpacity), border: type === 'soft' ? baseColor : baseColor + inactiveBorderOpacity }
                    };
                };
                
                const currentColors = {
                    tech: { bg: skillsChart.data.datasets[0].backgroundColor, border: skillsChart.data.datasets[0].borderColor },
                    soft: { bg: skillsChart.data.datasets[1].backgroundColor, border: skillsChart.data.datasets[1].borderColor }
                };

                const targetColors = getTargetColors(newType);

                animationState.fromColorsRgba = {
                    tech: { bg: colorStringToRgba(currentColors.tech.bg), border: colorStringToRgba(currentColors.tech.border) },
                    soft: { bg: colorStringToRgba(currentColors.soft.bg), border: colorStringToRgba(currentColors.soft.border) }
                };
                animationState.toColorsRgba = {
                    tech: { bg: colorStringToRgba(targetColors.tech.bg), border: colorStringToRgba(targetColors.tech.border) },
                    soft: { bg: colorStringToRgba(targetColors.soft.bg), border: colorStringToRgba(targetColors.soft.border) }
                };
                animationState.transitionStartTime = performance.now();
                animationState.isTransitioning = true;
                
                initializeChartTooltipEvents(skillsChart, currentLang);
            });
        };


        // --- SEKCJA 4: Główny punkt wejścia ---
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            initThemeSwitcher();
            initLangSwitcher();
            initTabs();
            initCopyButtons();
            initCareerAccordion();
            initNavScrollListener();
            initSmartScroll(); 
            initTimelineMarkers();
            initSkillTabs(); 

            // Wait for custom fonts to be loaded before rendering the chart
            // to prevent layout shifts (flickering).
            document.fonts.ready.then(() => {
                translateSkillsPage('pl');
            });
        });

        window.addEventListener('load', () => {
            initLayout();
        });

        window.addEventListener('resize', debounce(() => {
            stabilizeLayoutHeight();
            initTimelineMarkers();
        }, 250));
    </script>
</body>
</html>

